const log = require("../../logger");
const STONK_LIST = [
    ["NICO", "Nishikino Instrument Care and Organization"],
    ["W5TD", "Web5 Technologies and Development Tennouji and Co."],
    ["DLDW", "Azunaland Amusement Parks"],
    ["IMSP", "Izu-Mito Sea Paradise"],
    ["POMU", "Public Outreach and Marketing Uehara"],
    ["TOKN", "Toucan Conservation Efforts"],
    ["UOSN", "Uranohoshi Online Shopping Network"],
    ["SBCA", "Shibuya Caf√©"],
    ["KRRA", "Koizumi Rice and Rice Accessories"]
];

const START_TIME = 1659712200000;
const INTERVAL = 600000;

let db, options = undefined;
let time /* last released turn */, data, latest;

const rawData = [
    [242.17373903218305, 237.74145641328002, 236.30499908059136, 235.07340312411924, 245.35248243714145, 234.73277703645297, 241.90265997910225, 238.7982231017523, 232.76250085918937, 230.17167201254554, 221.49723157178855, 217.3166638809976, 219.34403303829905, 226.92614620843426, 228.8510735504975, 218.39568417510625, 226.1516107386584, 229.80451675814922, 219.93539591975724, 226.99243644903973, 227.6152682809632, 216.20548194946184, 227.23646113613606, 227.2072802067787, 220.12488572512035, 232.69264834458826, 223.02292022543477, 227.1359855891771, 218.92548188894375, 233.21476167431814, 231.02129796890995, 223.60244020940647, 234.19946234944837, 235.163102782876, 226.41744623314224, 247.61656553201263, 247.680811668572, 241.15076146721813, 250.45026534077525, 248.19666474783264, 245.86438121311795, 240.59947294249224, 221.14986946475628, 214.7547355034361, 197.43114324466384, 183.4259862074424, 188.4952546081431, 172.22384127835954, 164.56230334857707, 174.35580124364282, 162.6069886652997, 155.3571410728931, 150.9958024495298, 159.34317555436164, 158.49829858517234, 151.93052798709823, 144.04004169938293, 154.06648722741818, 169.57477843702696, 192.44067003868957, 218.16895225770534, 226.21033869007275, 239.95268534200673, 230.61621249610042, 241.0668051468873, 241.391321983747, 233.8411866040857, 232.7606620413623, 246.38253807682017, 238.28039004131242, 263.8527830535535, 257.1767614502565, 257.95347747205165, 257.6772449439891, 262.34396244889683, 264.23306275926006, 268.4159442332548, 263.2737724866379, 261.9388648563275, 264.12626124198584, 259.6884634343501, 260.11337930486627, 266.50851948836953, 262.47708724901634, 265.8511075787751, 260.6244476028196, 254.05674253825094, 260.33957047384746, 252.25508561482627, 245.69556964051395, 256.333301925833, 254.32204471630905, 241.47136002192855, 248.14873386428056, 246.29730098018305, 235.8844593861414, 231.6279256163536, 239.3576575885885, 223.9107376997213, 237.4182651886504, 222.05206184714982, 219.0812837251872, 213.74891944637832, 227.31541988533004, 210.06429549751195, 212.19121188130572, 217.0218496654551, 206.12783572412337, 206.16077229504504, 206.3448195887563, 202.8613327607093, 204.30654500196735, 194.0092686100548, 190.7847247837523, 191.44690381584297, 199.39029796757427, 207.50039714680278, 199.2954535190012, 197.46841428527324, 205.92105699380883, 200.79190652704864, 194.29724199733488, 196.70494981584375, 192.43415243409493, 192.399734175912, 205.4308335332395, 179.7312038289631, 181.58812295585568, 184.08114225123745, 184.31399478451033, 186.99663365349363, 178.97151041508218, 171.45884355965433, 186.48137200739487, 178.97808440775196, 173.59025203788372, 178.8098187730215, 176.4674294744325, 169.42858758592664, 164.7203921017401, 162.82301677277346, 169.02002742519988, 162.8925508464412, 149.43881196749115, 147.64035412071775, 168.75488981674243, 170.56758035346766, 177.7573182769437, 160.1406051104365, 158.53126622101456, 159.50498578798127, 169.6775056560645, 158.7021800637379, 148.99744274835672, 148.93766527474693, 153.50114014021202, 152.8820749095221, 140.61141139054618, 127.93280765214993, 137.00645230307572, 133.15472858420094, 124.90884351389441, 124.38091922596524, 130.82298688377998, 125.53989112902143, 120.58912134702045, 128.4064964888115, 123.69603184202538, 124.92406141344311, 127.35693184456872, 135.9792675752629, 129.35041467341455, 131.4108852241464, 134.1589325955672, 166.88825115311977, 164.39088971730246, 179.19547891608502, 173.0799321275232, 175.79814252816482, 185.16659919264063, 198.08799117346595, 203.45927121782597, 220.07604720064964, 228.66584159324532, 220.30866557227128, 224.33834920904283, 219.67686140035192, 226.99829202861102, 236.08104582817646, 232.04740979090246, 228.85323424319057, 236.56532791379763, 246.03002737678835, 237.59778143745706, 240.84504399947184, 252.24985056876605, 235.0881530028361, 245.72688368572634, 241.80496195204606, 248.15217675604916, 260.76743386626816, 250.75187365808102, 254.7267868256754, 259.3380190637652, 257.7893668129277, 256.91566129137516, 248.6843730837802, 245.50586011303471, 236.10472607721223, 235.4767299145907, 226.4568029424761, 224.31042976730134, 226.37456692036253, 228.11067504655315, 226.24294105308851, 215.54564684189128, 211.05506511717635, 207.84237459867478, 208.12604334578867, 207.71358056752558, 191.74364434943902, 198.93273979121994, 197.19079128431105, 211.87007485589265, 224.12951052647557, 243.2976534058281, 228.75517805472614, 192.74984582393768, 170.93604873331267, 179.9006029691016, 160.83520148588707, 148.99895245210223, 140.50093172520772, 139.41743019393243, 153.55196920443967, 141.86535301815002, 152.57423242211468, 159.75343483905212, 170.35424653232695, 163.34951668319735, 162.33290129242192, 163.7199371807616, 160.4176199851442, 161.3949051807413, 159.296701928147, 157.9430455080447, 160.84890997594948, 164.00439387867863, 170.40659259590115, 171.07342508642324, 166.4761540541322, 180.28564465322287, 174.51566121540057, 172.3438123428042, 181.00900893574058, 180.36285739003094, 184.46529439146875, 187.72923845648808, 173.24369939719563, 187.3901217223333, 176.18703700425016, 183.41121932376961, 188.45572045611772, 196.29899828674274, 185.3506364043106, 188.93555137102948, 197.5225343942085, 190.45734309552196, 205.17346787466522, 199.45370066085394, 181.84002960611804, 196.66695056730094, 198.91428520650436, 194.23155474527198, 193.87809991966935, 200.6582418156353, 188.98703492033187, 200.31030877021135, 204.33197576323232, 202.12852363375242, 215.70448200324358, 210.63874189470596, 213.62588685495516, 213.13265592933936, 208.25492972504316, 207.90235311128447, 201.98961886688124, 201.1848512629169, 192.1926287518313],
    [180.96549200375682, 172.90138102224037, 187.6603896361334, 193.6714665371494, 172.2821399191803, 185.89626756774237, 197.7660109295984, 188.22794593329823, 185.1492605743682, 195.74838661284195, 200.59923822417923, 194.12703470811306, 197.3272351217659, 192.84755036894632, 192.777447225718, 200.07142889751256, 193.48419162804157, 209.48579467998866, 211.49727185635146, 208.82020104994683, 225.9397911654683, 230.35615675401976, 218.8221801124613, 227.16213252145604, 211.1783323044575, 209.89516242291296, 204.0593941818629, 207.88060986978115, 208.42618928482472, 205.56100330732585, 237.98190976019356, 233.25816922643077, 248.75195964638073, 255.02114456334067, 265.29915617235616, 254.97403038564403, 255.36648776909124, 252.17838749524367, 260.7315656801644, 256.2627737034381, 283.1939933133686, 264.9300933034631, 272.17374855643595, 283.19473887026874, 262.9395834312606, 261.2661536000141, 274.3323328301677, 265.33906373834446, 281.00737785871, 267.83776625207906, 266.0053569853607, 271.2759872235352, 269.78432827110606, 257.9758365150601, 263.3225506268731, 255.57208404982697, 273.63205790807535, 269.58666186376433, 270.7006657182046, 272.95162308569945, 255.63148467463526, 260.805789037569, 268.5770040673929, 270.2162391258025, 251.75755422976806, 239.43853317143356, 243.70892712030223, 236.9123986705162, 247.23606268813842, 220.92947938546763, 226.4954133028105, 219.36034228726072, 243.10303841694343, 251.39029252382772, 241.76438149879044, 231.507114182502, 229.9509083543927, 244.957435449731, 224.4189143953048, 220.59572448791448, 212.73186935289425, 219.31460309863553, 212.43130986174737, 207.52510076499988, 224.23896587463412, 219.2076765827956, 205.31155858314173, 220.34414640357204, 207.3251471822499, 199.84042409464067, 194.30490189962256, 190.821540688014, 214.55589902075542, 222.9104970803794, 207.3418047450739, 215.77839370052862, 209.58413104310472, 218.48933326586922, 217.038772676595, 219.10209501186318, 203.65970570001554, 210.54445041784817, 213.83423466415064, 201.73276458646453, 201.1411354489276, 214.5169065180225, 204.729561078051, 186.3171082851078, 199.05822816484059, 189.8843358046497, 193.5224200020556, 186.26513856040825, 183.98924507386874, 171.66790248342983, 168.3456961085006, 162.56019344143988, 170.15111196135803, 162.23572657911518, 158.7111425347581, 173.775139601616, 165.36761676156033, 160.62384860280645, 158.24107352436383, 160.26304035599134, 140.72789060486235, 150.77876732174093, 144.88686557548152, 137.08684127715216, 135.70819824552996, 171.0592580389747, 157.69532144530706, 155.8100729346712, 166.21110032778887, 172.6746349316747, 146.3510335480798, 150.23672551473908, 144.85716590866474, 152.30469520239365, 121.05598031287799, 127.1780000421982, 114.16374152739323, 116.64302121705043, 112.42266499348798, 113.80945345762903, 117.67674968665531, 121.4691137967333, 114.05790641936997, 117.4866616392377, 110.48312776045358, 119.80289684074634, 104.79417891684719, 100.76005179233601, 100.68221883227514, 126.22409747226706, 120.59828548914284, 123.47149240488635, 123.89391992942552, 111.6126790217462, 111.62768392331662, 132.76964684816232, 106.3542322803575, 125.42303809650687, 117.97465953402283, 127.52502234459226, 127.21398038696177, 127.44060695991601, 125.52919651052872, 120.62651264090019, 105.93525033585203, 120.7845351861276, 122.07902393821615, 98.93442312219531, 100.61511216034589, 120.12023141602077, 117.00798433892406, 101.21347542976308, 109.93725454991957, 100.39826984622712, 109.55564202619205, 106.19720391396523, 103.5514557082426, 95.41693471425722, 99.20541853291631, 120.36393687261494, 122.86198892033684, 101.60453195944137, 98.99028137724736, 113.98720695551748, 98.09916994486079, 123.3995005630565, 110.4867937391461, 104.47873101853105, 120.92899231024947, 124.09455847365786, 106.60186219512381, 105.55402825435141, 101.7211765567364, 116.1870062284384, 124.23574259821376, 111.1488043196504, 77.12724555892615, 100.43785330181788, 96.48218887605591, 94.35525517835353, 92.87740251484223, 103.53046050776265, 100.55542242337881, 80.25401288758978, 123.44219816051665, 124.7558110205891, 128.31141935525818, 128.94967506989178, 137.17999502139043, 114.14333120125374, 133.90925879806363, 136.25992800972872, 126.55358548306125, 127.00833795064455, 120.20863234297985, 121.49284261301344, 111.76997670581534, 131.36131064840288, 131.08589024769392, 124.34052259518228, 108.29701047530277, 127.67439578647637, 119.11260771542695, 120.7313428750939, 119.9112303361974, 136.03800294276562, 123.85060427337265, 124.47295979263973, 129.74848773123693, 120.55952444349029, 131.99759485530868, 129.51392107247455, 116.01505087730303, 111.71749047524553, 122.92954386816466, 134.97960378900694, 134.65783463657917, 137.81181043073903, 119.69845105948659, 127.03843892855295, 130.39193006741252, 136.06852035037394, 161.04432196167153, 152.50635643835918, 177.35116760137777, 160.80710440735078, 161.6830435905738, 165.0621616792978, 175.1051230768299, 175.29010093014278, 187.23187038770237, 190.31829794067494, 198.4063075463988, 195.81880272595043, 185.2973155263162, 184.8535714585007, 215.49170880150587, 216.77059953747124, 212.67685480641518, 201.7407868189415, 216.5763995633195, 223.85306970366122, 207.26521105811207, 217.93943988221207, 194.75099683086194, 189.68315038865114, 204.55221805971303, 204.2203433265421, 207.36616359985857, 191.590653548833, 223.5441287551269, 211.68797559688443, 221.1968200152025, 228.17067170828523, 228.11507425453897, 231.88649339742017, 213.62649428710847, 227.6398480034378, 226.95342166955845, 204.5112416958334, 204.9515314738773, 213.19674623208135, 210.4027943911617, 206.60985058774116, 197.08906893050454],
    [111.6041515957324, 111.53786532916158, 112.19920167838387, 109.65203940018478, 111.87218616253536, 112.30238831644472, 107.41799601767298, 106.11061778725232, 108.09352200117402, 108.10908876042922, 104.43472533272657, 110.65847168016471, 110.0949282495656, 111.13579427382811, 111.46879328347111, 118.44601556610831, 116.73707589284562, 118.2699236785282, 115.21309476881311, 113.10147892239337, 112.99725790095931, 120.37435505202987, 115.96255103117191, 118.09931546352342, 118.57159213812442, 119.39786022737837, 113.03741119869237, 113.62307708348834, 121.57755421175315, 121.15894428122718, 120.93897380587867, 117.62297512551987, 116.81045662626705, 118.73993767194399, 118.71144241706745, 120.5918161026733, 121.04779911080018, 118.38631649255383, 119.12477253027805, 119.34503540788127, 119.36348139007532, 121.33422495729765, 119.50255227587135, 125.29830524620405, 120.27205080325842, 114.70875202615336, 118.60627983471993, 117.88842887283995, 116.36213732721687, 120.5761679847879, 122.72834571225019, 122.19286221281754, 121.63139620686934, 120.09045766101828, 128.12537405912374, 121.91271673470538, 125.98337564300132, 127.30889904237524, 127.67067402829318, 126.29955032626032, 137.38648588972663, 137.39678008522728, 133.0216844559337, 131.78226980807187, 131.21438798757094, 131.54949353412417, 135.64216391518832, 136.44158681185922, 123.70719619896946, 128.08019929403542, 127.9982951269568, 126.01339947501128, 130.1669376613865, 129.73124132829972, 127.60855332092603, 128.6597276979502, 133.44159903693765, 133.189502697526, 129.38292493720556, 135.08808139859116, 135.2630902649466, 133.09244869513657, 135.7529706917259, 138.55481565842615, 135.1531040688337, 134.56935773602382, 137.5667514210197, 134.62363377356283, 137.66099107725512, 139.50067741717342, 137.50269989020603, 141.87647118099156, 138.6531021203348, 139.0225436877143, 136.41560630604988, 132.00139556999466, 137.09875148345913, 133.88484243140283, 135.4665442944397, 138.90576572283146, 139.3381751864094, 146.70677891857332, 146.36562986292947, 148.67749123209833, 144.5747387018371, 145.5273743707216, 150.75468745231046, 150.55348537151372, 140.9896267213355, 136.70552030259887, 143.5597228229491, 138.69727201935822, 137.87870446488725, 135.86397546037816, 139.28713046760762, 138.32905811473952, 128.762580892737, 131.946000875768, 132.51031015537507, 130.08515407100003, 125.55593628454912, 124.89196500647013, 129.97255234818743, 126.79032707697658, 131.8415692386089, 136.54932402933554, 129.00453259497777, 135.27446718587797, 127.0767075065651, 127.11523719108885, 127.7128126840735, 131.9398984581496, 129.18675576178717, 127.39476193692037, 131.4776333680705, 127.36827455396241, 120.46368693437464, 124.70306904121105, 122.11129424780351, 121.149408753389, 125.40029231026172, 123.71514855105853, 122.24957026644415, 121.73473752234031, 126.9883133809814, 120.58778516228759, 120.87393377742546, 124.51775970286509, 124.36957240681558, 121.12047064582373, 127.98700393670799, 126.47860892532277, 127.66551438645219, 126.4420424167675, 125.05352873362719, 125.9235427574052, 130.20787309583676, 126.75284848669205, 128.6082888294696, 130.11488954630698, 130.43034133052686, 126.16602147603517, 127.32873752180075, 121.08645027293724, 127.54578154427043, 126.33703927110344, 121.62532849004229, 121.6642987270287, 121.17198584314391, 126.63047000058013, 121.37429455312973, 123.13449534739505, 120.80909173795465, 121.51176982289925, 120.56946844737638, 115.10633412547728, 121.42163669093397, 118.26176409928202, 119.31565189560371, 115.0384569745609, 114.61546925769625, 120.5466233013957, 122.03649961205424, 116.33895972605742, 121.82402491791319, 117.5060520071412, 116.66946387840882, 123.53734050269568, 121.91114432856256, 119.65431231853525, 122.65187438369739, 121.60494195326191, 119.56980544377055, 127.6806363675505, 126.28175465989322, 122.47798432764714, 125.44798396325574, 134.44385238606236, 128.98565592551392, 133.64947121529346, 129.57016310036508, 134.1807337596906, 125.42277338067811, 130.3940528706549, 128.40630439081696, 126.73493631283117, 127.40249707540312, 134.8492689599325, 125.6119637208912, 129.6177912854001, 132.5524717587985, 132.68577432996713, 133.07918992282356, 129.6606261029997, 135.01081227405462, 129.17082660728892, 133.2123305076622, 135.40272259190027, 132.74588023780623, 131.98925273631704, 132.93409023125187, 138.74162222508863, 132.95315009759997, 136.45678677484062, 136.11234193520795, 133.91668606531454, 138.57412445128188, 145.61599116027804, 145.53633005737805, 143.69275939621843, 147.90424334938749, 140.5893430369997, 147.8048685012009, 149.50343369626728, 142.95757594817223, 151.16248710519557, 152.6090562622265, 152.93227578462574, 152.80760670385047, 154.13681498385003, 153.92931662180368, 156.2142457381826, 152.29944742829588, 151.04737211380132, 155.73537865783788, 153.30696361587815, 149.67786759412914, 146.9251166194932, 146.84542947211094, 151.17228623550614, 153.64504752960738, 148.8256876183275, 149.76875071997364, 149.59660153681642, 149.26405908938733, 146.7751609215073, 146.4081784053967, 148.68579153966593, 147.16503833868953, 146.57106082096394, 143.30001773681673, 154.05461795770475, 152.70650276789976, 149.68445720319528, 152.43895644258785, 148.82843414832269, 153.6573026456735, 148.98556383114402, 147.7378227425598, 149.5141281904327, 151.2932110529817, 152.06080501704142, 150.33591848600213, 149.8502531298395, 144.67229327606296, 139.65575320656356, 135.85603323817173, 133.4226639343286, 134.0375119102873, 131.97892366209027, 132.2814499769072, 135.50856947963194, 129.5499809796966, 138.2887587266881, 137.51126398114388, 134.22712004293163, 134.45137447136972, 132.346830411563, 133.1284098334963],
    [120.85507299972136, 122.34530128491599, 149.81711914982947, 155.00644366289217, 151.20993604917143, 172.82158786066748, 178.72556525210348, 182.23794677937818, 196.7533508681995, 181.11348171510582, 195.88604279957627, 217.32844028725054, 227.89365845404237, 225.53270616978358, 232.97095849801954, 228.62524563724156, 228.77428921957733, 244.9901675909756, 247.6061600201471, 242.9595944371384, 234.61187932088498, 259.01455976626823, 271.0578697989931, 281.81856260511506, 257.0838044650594, 271.9137315345447, 227.74171657846045, 185.3074320022355, 203.0836009565713, 171.61661879767144, 187.6623215398913, 175.86814203762702, 191.8972408737976, 190.69264483612875, 190.0831216472518, 196.68992642178785, 190.22847968737017, 199.17137010858653, 192.47446576376677, 194.31018439385858, 214.070875064382, 202.84045089849658, 213.54391029464085, 196.05616024286195, 219.4116059149625, 198.7985966969305, 225.57325192352826, 217.49562363304966, 212.19315084558923, 231.72363374542905, 233.61408675050671, 250.9674945506692, 245.81475306508173, 250.0643259565326, 237.83234262987997, 232.21213421639288, 260.8470723290103, 251.14877710337393, 248.97354218948072, 238.4894941510785, 259.3116743873286, 264.08570355841607, 253.3413700090151, 264.25813425521324, 244.57011117799598, 256.58550264824413, 265.4166273317834, 263.30170149763075, 241.90020745492387, 204.64257296697178, 203.9018352199422, 205.51917665560978, 213.76328762104808, 203.58093935261508, 204.304669739594, 202.8811152631351, 192.60277507642206, 228.59461370606564, 223.43790590610055, 207.44695257242165, 215.0735919723761, 201.2674520359537, 188.8123560809944, 173.37500033623064, 164.1668587248932, 168.0188470539405, 157.89033458120508, 154.37587367851444, 133.43468679360853, 102.39755711574638, 123.87178347676547, 104.23279584503736, 105.27712152918436, 119.9688073767752, 111.79814941733414, 108.66200079649609, 114.79413498827415, 110.11498331442019, 116.01250071080591, 122.82034989609372, 138.08109267509002, 140.02917257519596, 170.07527309664187, 187.74107365809874, 193.26979049781087, 219.02867391209108, 235.08608258200977, 243.65588230093994, 244.7538061823735, 276.2325195974317, 291.8423408576575, 304.3134728474897, 321.54369709694697, 317.335944686512, 347.3133531259023, 273.1214045143677, 303.35698603253695, 326.0967587787916, 342.17373379377653, 363.3743237358436, 367.57780742161486, 374.8910837544339, 357.624548998627, 345.85903980269865, 336.1470311787831, 312.1027845998382, 305.8350230133767, 307.17570502439526, 297.2092391343169, 299.35407429118914, 303.7956446804776, 306.1842393268254, 281.35782356565085, 279.7982654275311, 277.8858994081503, 261.2819179752818, 265.08904781741626, 261.815428391384, 255.37745888805046, 235.2957226360686, 215.67716844354743, 232.89560268389855, 222.4465206461578, 251.28827034844446, 248.50649650956794, 253.47532355279685, 235.9896293194902, 227.56063244352515, 248.96516980321618, 228.2095379212819, 210.46066807003052, 207.80912255436652, 226.14369252142575, 222.7232191635567, 222.15025832894088, 230.8020566130399, 228.25813227887295, 225.36984304459077, 223.66631647782899, 232.1070463528268, 214.73219178842317, 215.70768169143759, 210.35443054151926, 207.3979267514348, 201.87227113886576, 191.99245039746168, 174.50899365843495, 165.74378796740146, 186.88662191480427, 168.41263458692697, 191.0182023876846, 222.17623668105838, 200.65195374532794, 198.77711095125179, 198.11356426962735, 221.9251408481545, 210.54231520312968, 217.44890143168206, 212.08490466934998, 198.07273593660358, 217.45905773399886, 210.77936394731825, 201.37758522516833, 201.90630998460628, 212.8977372163104, 207.58604586797492, 205.20325018461315, 214.45204168391012, 213.60146794942446, 213.73445321992753, 216.39423198267525, 221.68485254141297, 228.19118052856697, 221.67315132807627, 217.85914838083923, 253.44906662464456, 237.11423055128932, 224.981794672502, 233.28968256531883, 216.81552135856825, 212.00178398855286, 193.1521617049932, 184.19513413450935, 131.01972909678676, 105.91831254337657, 107.96537479993765, 100.34474932592003, 126.53716106478129, 160.60799466381323, 170.50570805661619, 175.81265592501654, 199.0781357522328, 196.9820366533276, 204.7637576847048, 192.97014701178, 205.4113263824916, 192.82751417898555, 189.6823579757576, 199.65576175630696, 211.20458555891395, 198.60186754731285, 198.1433056548815, 198.5611198337067, 173.1941222520864, 185.33406321046402, 188.1784856601344, 144.49498467652037, 155.85103498363304, 159.28272321510235, 182.4633940309083, 184.64539924182992, 211.58932704318966, 220.57089338096662, 223.5085265340841, 231.82479407187085, 251.94264171577137, 280.8656777834319, 284.695692027719, 279.416644753628, 292.6189867200509, 315.2505442820998, 300.3761927593903, 312.8531555639638, 311.8552154600366, 315.46421765023933, 330.4716168126015, 309.23913736662746, 298.7581661885677, 301.1170917229063, 300.1604831397297, 307.0502056952392, 313.3503429599076, 312.5318734898739, 310.0567217208743, 314.9448149967254, 330.3688695597717, 337.1043309290264, 330.29003575234174, 333.47522125161856, 318.7294014456658, 329.6561934306345, 315.729911132095, 336.48810309170966, 335.769634693842, 318.25292365200664, 320.45470661748453, 316.34078814643556, 312.6931551383558, 306.33023497770955, 301.71610297244695, 300.3800959984205, 322.5437607780749, 306.7797594379301, 314.8661283146587, 303.14280814350104, 311.15775011844505, 305.8646464687139, 296.5956495552239, 303.1113559758305, 309.5545759448822, 293.123429459256, 296.9500246823006, 289.507934726097, 290.0975176908422, 308.49829781826384, 303.68683627678934, 297.1504073172258, 314.36682234640284, 297.26290557698564],
    [83.0584712580684, 83.63567671481674, 105.63363541698618, 123.4813654061489, 157.23439006350603, 120.18708084187742, 120.88813096816284, 118.60061636547793, 130.48544117231856, 140.62283609319206, 152.99725936963972, 154.80278901994558, 160.57915848326735, 165.94735115964343, 163.41469131385492, 162.97759871803373, 152.5746410161002, 154.20747905927377, 154.64449815745868, 152.21397541116218, 144.29969318781093, 148.22846747530934, 141.59576960220946, 149.20849182251857, 142.1816032466391, 141.98415491940267, 142.4247977385993, 150.73008635445007, 147.08692400184188, 137.4846727513631, 137.73419500013557, 135.77810033707954, 127.87537423105218, 122.33596646184799, 110.84122997800455, 107.33089305890164, 102.41260427224498, 95.49205356987662, 101.39796677095035, 88.36437980964098, 89.20538194311003, 80.2193193851996, 75.79453507704645, 69.58661671329102, 79.55038388719211, 75.73190904708858, 89.72509509614096, 94.70882373626394, 96.25723582830096, 100.17314057617357, 104.54302733323073, 100.40211968060527, 106.11904970512632, 108.54932279639567, 119.14758757187869, 134.75521646829117, 157.81825573218998, 171.7258205209542, 124.46773465890732, 122.01603743189622, 115.32434232590629, 118.70577336342853, 124.19350462779988, 119.16602272787989, 121.27886571952502, 121.02344063816562, 122.29582654190409, 125.7066745781691, 120.81777435126753, 116.83500633672026, 118.92606611875786, 124.96776113070487, 118.07127494111504, 118.68689409075344, 113.31025021055453, 112.14299688306988, 116.52435383673847, 116.4992108100048, 109.69875333728089, 113.65111721734601, 129.52876660908493, 124.0308215615903, 127.46624270194067, 123.81067226341455, 124.07239927895671, 119.30070667976045, 114.85206999229084, 103.12282917976509, 107.45881471711772, 100.86663045033076, 98.54810390071428, 96.18489532791563, 93.12070905307439, 99.09468886292862, 101.71244967717587, 99.64102471104711, 92.24138717186985, 95.14066427033865, 103.89684884710621, 97.89397617496911, 100.62382719803063, 108.19023143710999, 115.27424475687255, 116.60493448801128, 123.23338970156766, 142.05061061270106, 142.06081392142795, 154.2172184610703, 155.80040029400107, 154.45680330634366, 147.33729342614342, 141.78205815103712, 140.79694916911427, 138.84227846261152, 133.78562469098298, 118.92232965204394, 106.83334804898249, 108.11210055944245, 127.82686017151238, 133.48835328275806, 143.16996952292573, 141.05271141174904, 146.2457882319169, 154.27144601460873, 148.06131652885466, 149.93354982910944, 150.1919724932951, 149.49943308317896, 156.68330172863952, 156.92813037930998, 162.0030551642147, 153.96866966755704, 158.10000691701435, 163.71411062498996, 175.44756784522104, 175.47133284556182, 183.78787322236383, 185.39438348453612, 182.63321747549944, 189.17267379778795, 188.13405235265117, 172.17208439526985, 154.75984096928138, 129.5873380503421, 112.75185404372203, 147.50066466529825, 125.68311144685163, 118.37053068141276, 108.17348622642108, 111.66436987657349, 107.67762310797251, 113.44720325422813, 110.20731617768483, 105.87092787277058, 116.26094704029691, 109.65853717984774, 106.0421976016998, 115.05940697191969, 112.48074663627986, 112.79726295558723, 113.39078438539826, 117.42856335052838, 120.20689851174257, 133.7421970938047, 136.87838332902305, 148.03415584275945, 145.2954091123177, 151.8598906116211, 146.03887834685287, 141.85362725716786, 142.14277339607975, 141.75576507785877, 145.3026951785345, 144.33787862920246, 121.27614720682152, 134.22014277631763, 148.09413553082186, 159.87113485956843, 157.16589942035267, 157.01386523120547, 163.19538421969816, 168.96033816702743, 158.41642894033538, 143.69306146991332, 91.99039262684528, 84.4764465325492, 91.95824476347576, 99.16668256741784, 102.57229422960582, 118.99049089022925, 138.00211937960097, 144.36135703214845, 147.38691079314646, 146.45517356248814, 165.88952401383006, 167.79516807594263, 162.38712452459106, 169.40938568951606, 171.03281189719314, 168.92783976675267, 170.30908784238605, 164.59791523671996, 159.32773011338486, 153.89916440663737, 141.99214427271374, 142.87275374213266, 144.3439205599357, 165.23920875366514, 156.8760554307872, 117.56314506497415, 121.94844404703497, 124.05269840913991, 132.88865156778593, 139.15546794318226, 129.6431873415105, 131.38171593073494, 135.48407141717996, 132.05480088959325, 130.07782447717796, 134.57561540239277, 121.13377474042247, 124.73357972940967, 121.3205701520657, 131.4853836182022, 121.22574137248463, 117.76004514328795, 120.20857263286689, 111.92312194037233, 119.76440393843754, 120.51846976641787, 138.70568363214934, 133.65226391749428, 129.15895576572987, 137.64714598973174, 133.3660854224736, 133.65420472933852, 127.020089114788, 129.2814527935629, 129.20993203766506, 130.828707590986, 134.26295362791208, 131.91206293440086, 132.25700650302645, 123.21084570911681, 132.28236643876545, 131.07086369740028, 129.63466947560516, 128.22032328785306, 124.3116936686495, 132.7686499658402, 127.27228628577933, 125.82427192931854, 109.25424095302537, 114.19701624872997, 115.10047310836592, 100.95595834261512, 96.40238671405805, 88.12231427252617, 82.65880355451364, 86.19496123991782, 77.9714590751465, 86.74334410639055, 86.35542261461266, 81.08057113351632, 87.05402024949674, 87.29918632718477, 94.59860299319378, 98.76210846939992, 99.4706686201291, 102.30611097896622, 107.29944986760889, 100.92637672198437, 100.27117361298522, 93.52513304404208, 95.25376746021551, 93.6812409578267, 87.20826527640791, 86.06847269595542, 83.4834853152284, 83.20416844823535, 91.79935914203911, 100.63004002591609, 111.87057900616483, 121.90920905050456, 153.10106581439726, 164.98284324692418, 147.01569488327004, 129.04407811521642, 91.05818350723217],
    [162.62788698570725, 168.86968851526228, 165.9181223422882, 154.31654732098485, 113.8069269313867, 107.79364276588035, 103.11847924413502, 115.34042400306163, 118.83831629621261, 119.61696480343576, 131.12965380427826, 134.6507810034055, 149.4430690532465, 154.61494436353996, 148.32976127269148, 146.54036773732403, 122.72638881832586, 113.02533747891852, 99.79132434424359, 93.7722930395058, 91.4939669675164, 90.40534241874032, 102.47322581921759, 124.72570486326995, 142.44070551579648, 146.48478508458794, 142.58863579039559, 114.48191057082863, 93.72761903787706, 90.82504236490936, 85.8686829014565, 90.15523334099026, 88.64687571897056, 93.81881837681765, 93.89095006295871, 100.03821751307241, 101.0522226520971, 98.84745336639271, 108.71123608264898, 108.02078877744887, 110.25133995309255, 118.60636671132976, 115.00438350157225, 116.06325801906769, 124.43629606485055, 121.72928096473026, 120.53110858084526, 122.53130674586652, 117.01677585593129, 124.9489483120253, 135.6568925697214, 137.47509879557632, 131.48760105642435, 131.84344031166563, 120.13389166528086, 111.19295132915641, 108.38073913664994, 109.83077129005858, 103.75984706190172, 107.16283731322716, 96.55594327233031, 102.73621530116871, 91.34485375686992, 86.21218476809399, 87.60680709600953, 87.28513560225323, 86.41232370015442, 83.33719846237719, 78.90315345060033, 81.95920788288888, 89.24203788693318, 89.27990734954597, 90.52682624557217, 89.79786836669703, 91.16908060004579, 106.74710660601198, 105.6028455961232, 87.40199831967136, 77.80662863688848, 79.56405751740527, 71.40130501900862, 72.26177144950384, 69.46849021538422, 75.79331675225657, 69.11590476201766, 73.07700655284691, 94.54832363064764, 94.6030293829472, 96.83251870393536, 103.29716472883936, 96.95465689118961, 87.47697807280963, 79.7510998424293, 82.4546258558899, 85.98736871720197, 83.88387403890731, 85.01084057399079, 86.29742205043803, 92.82260613274765, 85.25642230715727, 91.29462971857352, 89.51899695529406, 83.76783970530872, 82.95209759402536, 79.48916095118, 92.69014079071201, 92.80293081853331, 110.96249486957886, 136.63671582622783, 112.35345278831872, 112.15581577783945, 104.29358217429109, 99.18136973321009, 93.35500688893644, 93.24477586142294, 90.09833133285773, 87.3909933620002, 94.99177124974224, 99.26037953497226, 91.28451021473755, 97.78861606380474, 91.98096861986537, 95.89270079899559, 96.8575731567802, 94.21881585294503, 106.05905731166182, 100.99575414631606, 102.45787543027556, 104.67248655304385, 113.7086275691919, 114.37444657519893, 115.40947475338103, 114.15693423500552, 122.65826386753324, 122.86276704948689, 121.07575203998984, 126.46371037686478, 126.0988946830725, 127.16977946587836, 129.87941991650487, 132.47165865733976, 137.53620304791974, 139.07644999672894, 137.0626068324367, 140.08095739093196, 149.28217877676795, 152.9780924089593, 154.1624395964546, 153.11131012625782, 152.4909294117518, 154.0147010639315, 150.32867750886044, 151.09247582355738, 155.13065693444162, 152.91394651106688, 156.11069580946483, 150.03281540179285, 143.1116498349012, 143.64279182654224, 135.80531506916867, 122.29065484067485, 79.24339937994552, 91.68615183078116, 96.61353239488237, 99.69372093672395, 109.50861412001737, 102.10443015738385, 101.17510120154623, 98.5987120484041, 95.09402138867212, 102.11945322412188, 100.50213255606873, 91.48667140420142, 94.83597353729049, 91.42601643008213, 91.1780982239927, 95.95491248063821, 100.73421059682258, 97.34195964690804, 92.38647980539648, 127.80448380280626, 117.77679521620246, 115.60676008445094, 109.72613924690216, 98.2590117623576, 97.54023260402715, 85.04115747376333, 80.21050443635053, 81.62945726735147, 83.58586043270557, 84.1660503942782, 86.97592206496506, 87.32814169647482, 91.62240969313956, 97.09636879306659, 114.39867365443993, 121.56072549100278, 125.17872154833385, 131.86243439974152, 139.5090222274337, 123.93463868559526, 91.95209578877245, 126.94868525769382, 140.84531905899348, 140.35005883571768, 144.35092239206915, 157.9115213701495, 156.95012882681866, 157.67346164120875, 156.76991212219576, 163.7053113932843, 155.75027103710673, 158.9467456519955, 146.50755573074662, 147.86943247301784, 133.7213909222025, 132.19446933956897, 119.49493019970194, 117.16353715317597, 109.24913910292366, 105.00750719454956, 92.74117162026309, 99.44085433621257, 92.35028369828544, 94.19617399711615, 92.98637249635054, 82.16243538942624, 91.40125415093019, 91.77984634257128, 102.97262400754599, 114.17010053759142, 124.3564305029467, 123.45738293140855, 130.60121590257984, 127.66320629132088, 127.91803771339856, 126.00639757581261, 117.4836510698244, 118.78703734831905, 117.9398428023159, 100.49212540364182, 94.04829596408766, 97.05014315303802, 91.45261096206555, 94.85579659087252, 93.97167346351391, 100.10327297996429, 113.68081230438852, 115.46837882228553, 110.9625129838945, 120.87658983981113, 120.64182856507672, 115.74132047646354, 107.49035091840588, 111.10157322182857, 105.10530056503451, 103.2708575937888, 108.98349270879231, 106.29761759530439, 96.0325535634494, 101.2286115760517, 98.80592589473764, 100.88637057301354, 94.60236807192358, 99.54718003402695, 108.08385524793076, 118.07259550896356, 133.8332336694758, 135.54420431764765, 148.69670079082965, 155.1750459815945, 154.18114093970883, 159.83426799153557, 157.42590226907234, 161.82271885388332, 156.07779145207326, 153.11893848441417, 155.10260706623245, 148.80659452027356, 140.07897243077252, 135.58374256930176, 102.1845414426792, 99.99609693919672, 98.90085822723877, 99.76386174976874, 108.61290251342773, 110.14722384363208, 109.58168690222556, 105.60467310073079],
    [120.89837124380801, 125.15243739016665, 129.75483962708194, 129.02800423079125, 135.23425751257486, 123.39217572882441, 143.82899701084523, 144.0654983632585, 147.86874570168322, 145.8140915840579, 137.47103303905556, 137.27938132217656, 131.18745825394203, 126.59575020674063, 125.91852720875144, 128.14889357241384, 126.57454277419936, 124.0363795616516, 121.56301591379474, 122.31884819036753, 124.6451149060531, 131.2180114189338, 136.48034246855053, 142.54745576722064, 153.6092343870548, 154.13439520691065, 149.43027864304992, 142.12530610325499, 108.23135960675705, 93.26656248122113, 96.81246174486118, 103.20756514795745, 105.90313365970422, 115.7878331597322, 129.51978768251473, 136.35643202308435, 138.09526999837794, 142.1110666187873, 142.88218925629013, 142.61711948603403, 134.70298604130403, 133.5492798041133, 131.8105884568585, 129.3140495397861, 130.79832871413436, 124.61500827619346, 119.589628545345, 118.44389606796183, 119.74404599276181, 112.36856178985589, 107.89839366888759, 112.64583595395196, 108.96054579456239, 108.7207024039468, 114.23315239241222, 108.43795074323047, 113.33993635067662, 116.17762755118335, 124.619824812476, 122.67466668182657, 130.05232513986346, 127.81666737021962, 134.06360849566477, 134.78142455176587, 132.59664805810905, 132.46647818473622, 134.27938179893263, 130.27867763668857, 121.16305889124652, 119.56125061098864, 117.29291147560737, 110.42187145491495, 114.81109336822301, 114.44909580052509, 112.43025184180146, 112.9561059906224, 109.10052287936668, 109.62537851284793, 108.54311789453682, 106.59255588253914, 104.48612843589368, 108.57633313436443, 107.40115769510507, 103.9792652875423, 109.92970945147758, 116.97429496519717, 119.86173448668407, 128.20398565612572, 137.63940537711977, 144.14753751567366, 154.6655025783174, 151.78594217696977, 158.23432490901246, 158.1782200121418, 155.58502097158794, 150.6983219056171, 147.31766340391013, 141.93268411302572, 136.58642681889683, 136.03193297824174, 127.25643348757245, 125.83425240534167, 121.29579805659314, 123.18706958648266, 122.87046924043932, 114.4787137826055, 140.2756141623481, 149.88044690953438, 144.59533751587747, 145.3781249739198, 144.91263746304367, 150.74996298046185, 145.156589289594, 151.006446908614, 151.1295625813186, 145.0446591638448, 140.93989968033534, 129.24544686155372, 114.70468611796258, 103.45702514776573, 101.30412146923243, 101.77329673232109, 101.08676957937122, 97.40343866482459, 99.83542250332071, 97.4049598046764, 108.61521256049691, 109.3249080137681, 107.89058981945017, 107.53687876969659, 112.4398548579512, 101.1137936022414, 104.40455974406828, 107.00929609553046, 105.86841956508516, 112.46073055588097, 107.92862702776871, 116.68741862716513, 116.41685074250316, 121.73131984341684, 130.04118525180112, 131.6259759867316, 131.48311155786183, 134.99021918132948, 132.72979331293394, 133.33019709879042, 137.0631663244036, 131.646607434131, 135.87793603403858, 138.20308279260976, 140.67748562864756, 140.56392500457446, 136.42105685746253, 135.0053044751998, 140.98754372962247, 131.97246776910777, 136.66754762631388, 130.49878775362868, 119.1547267134471, 117.6978881539934, 115.62336781924512, 119.48047821553558, 119.6031594930221, 125.46436659601906, 126.92704853297214, 129.73304918575843, 131.54743355211627, 134.8722330441852, 141.76141750121323, 138.95288424689568, 143.04473129676995, 147.13458884572157, 147.64372259884135, 146.5460738238829, 146.1926404926134, 151.4169187688468, 148.02552533820221, 146.23424491100906, 142.37312743400298, 135.29986527640963, 107.57183900618963, 114.2731759818523, 134.68716111696978, 142.02887398153314, 140.7110907024079, 146.63217635068753, 146.39811591225964, 143.25898917802698, 148.5129540363013, 140.24722210453734, 138.51125700137564, 138.72113580000223, 147.88692714107253, 144.48677845533382, 142.28097260459197, 134.44219145804828, 128.4221865202607, 124.21690074528213, 122.69142163220808, 118.29152030958272, 117.90233540917168, 111.94077689679469, 108.8432827140875, 102.34616459550722, 126.8110226954678, 142.13939489958832, 140.47796816281556, 138.7073242542996, 132.91035275155727, 130.13796437999642, 131.29993763739836, 126.32145696350352, 125.51956434484306, 120.4634648408417, 115.82203672700207, 118.90289360051634, 116.0553296630787, 109.48866245897457, 108.35783489435511, 109.44470579991389, 101.73917295679092, 105.83106845754776, 100.60916384587155, 96.53855084309481, 95.7734372551565, 96.08231908768228, 96.720033861279, 90.9645840583767, 96.76615325201882, 113.57931198192968, 118.44818500551041, 116.94013945010137, 118.67502403649634, 112.14256210583851, 113.43702895581008, 109.20076658241061, 110.86762350799607, 117.71607237561156, 120.12269974516963, 118.93117445370011, 125.88662193151833, 135.53673622197059, 137.69101101950912, 152.7118860444148, 157.33093305086157, 159.3036317313397, 155.37874117453038, 166.5703201703999, 163.38283551891857, 161.04660790376286, 161.57450170222938, 154.34697548786636, 149.07760345293457, 137.101792305897, 129.1131549259312, 123.99235987931507, 120.53279921882904, 114.71279718746332, 135.7453976667366, 132.726133555341, 114.82118034716345, 114.74906974842601, 110.30791022155789, 109.48766330536371, 108.53304129054268, 113.93829415813795, 117.3549392758079, 120.27311829946385, 112.54741186702509, 119.05217263227419, 125.91300454826484, 127.01451633810501, 129.68618976350388, 127.00187392862519, 128.09523746967108, 130.9233230736222, 127.84002854463786, 118.84776673135804, 121.29362739562728, 128.1249624469993, 143.71176732988667, 144.5821615102691, 139.06021222181377, 124.91167201551094, 108.47691561304285, 99.55181782929557, 97.89749673043741, 97.86924104110905, 93.51599578978606],
    [254.0963903356718, 243.3993063505468, 245.0046256907362, 254.57568467693767, 249.39021034742882, 267.9583449079035, 240.40151459693482, 236.10050414433363, 231.55049138389955, 236.0164808520306, 240.47397861728865, 272.5055143554822, 274.2782611924096, 258.0419475713967, 264.69550844603145, 263.6110423588277, 261.42207608315596, 263.8911963771722, 278.4768542591123, 275.75528112645804, 264.73185138862385, 259.491309549019, 264.48547525282123, 269.57042199825736, 285.2151959529937, 274.12393914802476, 287.99374931355356, 268.7459364860476, 241.76836084270042, 264.13368454234677, 260.7179606041121, 247.86606044352493, 256.67704516302956, 238.58824416961556, 250.0881409325462, 250.61375874666203, 260.2992447221829, 277.8140835954631, 273.096236096258, 282.61604598205116, 258.6478852328716, 279.87744294447907, 273.5735345922744, 287.5469079764509, 280.58921439484635, 278.43382147047237, 279.85820084921835, 297.32179394372565, 293.05131285894885, 294.65238081647595, 286.5231897420958, 295.5191683282594, 288.2135843223668, 274.7892090527832, 257.98345120908806, 269.3616118036475, 269.69065562638735, 274.4691670960128, 251.12040074983543, 275.3789738924675, 263.7140582212985, 278.22535748540787, 254.71906581194008, 268.97446694782616, 270.4004195189411, 258.6176683179304, 273.48216294309253, 280.86790945566605, 258.35125545876883, 260.00407147222603, 267.8629729065061, 255.10830798573107, 280.8858783015396, 280.9782734204458, 256.5451309176545, 273.1220555981934, 249.73732382429978, 256.1411643106197, 254.24248471602783, 271.3346270393913, 264.3912717927659, 247.90350593572043, 293.5980140473304, 294.3801108518267, 283.18021982296915, 296.96077192485944, 295.389751173421, 293.9068068921041, 278.55057618587693, 266.31214492516233, 263.6657826760793, 277.0888119824658, 277.4442072138208, 283.09322617647837, 275.2213145218475, 264.6901353584034, 277.91168820013866, 294.11196340796425, 279.4556561660891, 295.3591916595117, 289.36873180195505, 280.00819232676844, 303.34978001434064, 298.41465240847043, 283.7957079133317, 285.4049610464851, 296.6990091652189, 276.11351122759936, 285.82598145830525, 284.9563318465807, 273.7781037914292, 294.96889368242654, 276.9470887884726, 262.59438167666355, 217.84441652562776, 239.25740521172042, 240.95356072166953, 252.9291674069977, 245.81779524932972, 232.94735952378096, 237.60280106962261, 226.63845553852445, 232.90148842846435, 227.2163527648371, 246.75332378279268, 244.78395192286268, 224.55526246330754, 249.06263872556923, 228.41533275106406, 226.31720458896115, 222.64094565015796, 246.89580425527248, 244.08255909677905, 230.00733250227177, 238.66116935324345, 239.88410603165215, 240.7776455549798, 210.7999128696601, 228.37131636155635, 233.63949747988494, 209.10327751715454, 231.97695357306702, 213.14832591822997, 210.2274555195654, 225.31694821463537, 206.46183305099174, 209.48786038189374, 201.82920069246774, 215.69335973885046, 211.80178932370853, 216.22381521252186, 211.85629387926997, 197.34077262280422, 217.0195055475893, 197.32090122258566, 223.82474162953451, 193.93466621983384, 210.48651070495038, 188.26546279374676, 205.76781250744307, 203.61568307570957, 201.677264664775, 209.61106909885618, 207.82993811386433, 220.26921271315496, 210.5743567954151, 209.1419918990087, 201.79741719781424, 196.83559409612354, 186.44423611172454, 211.76232223608008, 206.60562625790453, 206.87717907952336, 209.38355302740055, 202.77430066250233, 201.34181381957723, 194.99051666043928, 204.67918487352307, 204.94110814332296, 209.9075867506677, 213.35044276038136, 209.95739705463444, 223.32016212375504, 213.68707304694877, 210.80058586072474, 199.01151079054358, 203.66900693250446, 192.4580157061131, 200.911995463634, 206.67514124700244, 196.09001105176225, 219.19560091105643, 205.59430890295448, 214.19327097277755, 202.67325015873874, 206.68204367913427, 208.4327578073203, 206.79289696071663, 201.4356065310672, 213.97253825825828, 219.25744038838826, 217.04751130878333, 206.6603450876209, 216.73307996993344, 209.46732231413083, 222.80824485967827, 243.16610950046726, 235.298052970794, 231.12510089989405, 226.8178432893974, 217.4088283359642, 224.19103551242551, 218.51085542299109, 201.07820516693118, 223.0080027686816, 211.32740722532623, 222.4449817410649, 224.33187421553686, 200.58765385363245, 217.6083480822113, 210.36649771211148, 212.74240353953473, 207.26094066356953, 190.96699743609457, 201.84789915723886, 189.39651675571986, 205.25720813938034, 206.00546190831784, 187.08506172193538, 239.85962488142013, 231.25322258853475, 230.3346077645793, 235.69163148170912, 234.81666526362892, 248.07075179446764, 248.38073160885443, 230.06110700504468, 223.84778492394605, 236.21674651387093, 225.803734453324, 249.39778834698956, 245.88986144233706, 248.82388207154395, 226.47784853198766, 204.10191250576446, 203.3360636979828, 216.3456185071194, 218.16894912247375, 222.38422103647144, 198.86347907786507, 220.56613985195276, 211.34412342795537, 210.0909863384558, 201.6284418990101, 199.75424542764546, 217.6849001625111, 203.2681318322069, 214.55340888622112, 218.35014247391297, 195.232135772126, 208.81650567403742, 203.91402276231986, 210.5664314304914, 195.95839203787426, 213.7910541465979, 204.79780882267815, 211.6589203307979, 211.05955513090987, 203.00600158308146, 207.5111577225631, 220.1422576678509, 206.23168986623278, 209.28920891288237, 202.40116169856174, 208.38619088750048, 202.1244840722642, 214.09234791649175, 235.55746043530604, 234.61693357404937, 210.96614020892395, 233.75570181174817, 232.62518606240621, 208.97874068687378, 228.3811096022929, 214.1292841684298, 209.84537474851072, 222.07107258837652, 182.70498668515046, 176.46796046683028],
    [152.2545663737217, 163.65489555434993, 168.73014013294613, 172.83660482766857, 176.4472315826991, 161.83028365010415, 164.10306271160528, 169.58250673256114, 176.3109436797842, 168.91472661007705, 182.1422226279276, 184.19226883375188, 179.8726002538346, 196.1831656452558, 200.25602931716077, 218.1236981962264, 220.42045408739358, 220.36227918314273, 233.48657865293907, 235.65080164082156, 231.94011371383343, 234.51227113919037, 254.7388892963645, 257.9807152662055, 266.43469086325535, 248.71347634761486, 273.20210712707234, 264.44706098448796, 254.95845002936258, 258.8803690926978, 258.08397746627975, 240.53405009411736, 244.60241045272753, 221.82899403534165, 208.02461021190513, 219.82507871463054, 199.08046626249757, 185.2357565069666, 192.27875306336142, 187.6682894138491, 205.62750914134483, 213.37975714988585, 236.86755667105234, 258.5328727861568, 297.04077669981757, 292.9393349823064, 295.88144338517293, 303.47226030213335, 324.70519360271686, 302.7037416570672, 299.87488561328746, 296.2838836557189, 300.89615888647677, 324.570510462795, 306.57792691381167, 334.2056111392236, 329.0090593000894, 345.33917895616554, 325.098753690786, 330.50824729717107, 341.1454751404393, 318.91412451870383, 326.85598869083424, 313.06832973305654, 312.916027372565, 306.2532739385122, 312.72364990025125, 309.14595820835615, 297.43282788068234, 311.1048138118489, 301.45869922020756, 293.275606473357, 279.91766765628597, 256.71306079691215, 270.6742619179402, 262.9030097448805, 254.504406396609, 253.75368418777313, 235.7484659974169, 218.89728415824845, 236.62440052036158, 213.882238189948, 211.52602680290073, 210.35714544953845, 215.93781058906515, 217.6447189417689, 197.2287480316583, 213.64714267420624, 208.79339186085264, 206.04753699700007, 222.78420483606442, 218.5023768700532, 233.79242345849016, 227.70714725668583, 234.6409702990197, 234.82661860802776, 218.53512574182622, 226.3809664173015, 245.38256486341348, 232.52298149615382, 238.21075602228248, 257.90796293647884, 245.76807324903004, 261.5134653631385, 241.81703995278923, 246.65482715647553, 224.90434052386368, 234.51560555450845, 241.3104023800964, 243.7694233213336, 252.7481369327929, 269.9863763816445, 253.85661750804576, 274.9446178677132, 260.1812160681508, 260.1538121378626, 301.62925796671675, 307.73831363431555, 303.75789269425167, 287.725810722564, 303.0664534655911, 268.9508317306868, 287.2636509076217, 277.22405047626523, 292.3882230418836, 279.06241226998134, 287.839942118732, 287.4895572585584, 289.3662872164083, 289.24762362414197, 299.8308349364727, 297.0748700814213, 279.2762668794804, 291.0855132270319, 296.82785079048364, 274.9074755365609, 295.35871239338724, 283.0904113468348, 284.44205461698095, 299.7254574446792, 297.3495006879813, 296.27006407989586, 292.15078220685103, 277.96688325494176, 258.287961034063, 259.22988523573554, 241.0581361684615, 247.9679851516151, 249.2450030568979, 240.64867726877324, 217.08767030178663, 232.4254421767038, 226.5654647975419, 233.1195177359896, 232.16972292290473, 223.62288189204045, 210.64545809853973, 221.2809691321847, 192.7051199194034, 213.02601355479433, 213.4676703196593, 202.45442035648057, 191.94295897528818, 203.79239961368967, 200.12441346663115, 180.99926790346984, 176.45434730854788, 175.37153735597758, 177.82308453072605, 160.68642310366803, 146.23219681494615, 163.9812328826503, 152.1159296429683, 168.8276058580248, 188.8152657929988, 170.80488679106705, 192.7367790084853, 182.4153022641142, 187.77362709697445, 193.94040502708626, 189.1104033852008, 200.0437966241766, 216.40170142914673, 237.37556431571767, 256.0616475621208, 252.23846082440232, 269.1411276945919, 259.5219000190614, 273.3035580960502, 282.8897757671013, 279.17514261993813, 265.55865839503855, 286.73605900970267, 273.1390144678948, 273.2390957444263, 273.6892155787804, 289.5516547594484, 273.9703188204636, 255.73529438314125, 253.37747748292634, 253.24882340734624, 264.52048432303786, 271.35562936147704, 268.0388160170619, 267.08782644254313, 261.6290502238511, 270.77826625581235, 263.16991807639977, 255.51188348180207, 272.6219751779982, 237.07425849918096, 240.40976584918744, 244.5499610730412, 237.07658531912816, 226.15426185423917, 235.4379388455817, 236.69510066807558, 225.72577320021495, 227.071283993683, 252.5014348328122, 252.5032050619251, 240.44565202176045, 245.26082158485806, 241.76980197862898, 248.54516010112198, 265.96789646767456, 251.18673524087444, 255.20125809698433, 257.3062141237647, 268.64904692791043, 267.751837263298, 264.5815515211958, 269.96913586296506, 260.5875591525849, 276.60303203233366, 281.34778660025427, 303.6550603510657, 285.4789479521687, 287.46914186043216, 288.22943524540244, 294.75392990519464, 280.60185164358484, 282.9882312870194, 276.17299021983536, 277.956212186368, 271.7116594641514, 274.8094354551888, 266.3516968179605, 279.44441829246654, 273.6535330696838, 263.3337914845481, 263.32254713229304, 243.34637414283685, 234.77066599688493, 243.9396827046778, 243.63618449681007, 226.5158899249101, 228.88946246436936, 216.18288088698148, 216.61745846577685, 201.0551536961069, 207.01595575741527, 188.49189510561644, 178.80630116904715, 176.18202969412084, 168.68868220602138, 173.6038903455846, 159.77381319364815, 164.7254021695543, 167.92612467172535, 180.93127666314172, 178.44305739194965, 192.10530117896587, 207.2692007964568, 209.50522369100827, 238.1411547975821, 227.66540901289287, 243.03674622949492, 235.29767169098815, 213.35177189780194, 206.14709848133072, 169.87347768332475, 173.99655057400844, 166.67981730089045, 197.3986338071232, 229.1714321602964, 161.67786967054752, 132.45715411972122, 185.70615771122849]
];

function addEntry(i, close, setLatest, bonus) {
    const open = Math.round((time === 0 ? rawData[i][0] - (rawData[i][1] - rawData[i][0]) : latest[i][4]) * (0.975 + Math.random() * 0.05));
    const entry = [time * 600000,
        open,
        Math.round(Math.max(open, close) * (1 + Math.random() * 0.025 + (bonus > 0 ? bonus : 0))),
        Math.round(Math.min(open, close) * (1 - Math.random() * 0.025 + (bonus < 0 ? bonus : 0))),
        close];
    data[i].push(entry);
    if (setLatest) latest[i] = entry;
    return entry;
}

function cap(x, min, max) {
    if (x < min) return min;
    if (x > max) return max;
    return x;
}

async function doTurn(noTimeout) {
    time++;
    log.debug("PARTYNATSUMI", "Turn " + time);
    const newLatest = [];
    await db.transaction(async transaction => {
        for (let i = 0; i < STONK_LIST.length; i++) {
            const bonus = await db.modules.partynatsumi.TradeRecord.findAll({
                attributes: [
                    [db.fn("sum", db.col("amount")), "total"],
                ],
                where: {
                    turn: time - 1,
                    stockNo: i
                },
                transaction,
                raw: true
            })
                .then(res => res[0].total ? cap(-res[0].total * options.bonusMultiplier, -options.capBonus, options.capBonus) : 0);
            const prevBonus = await db.modules.partynatsumi.TurnRecord.findOne({
                attributes: ["nextBonus"],
                where: {
                    turn: time - 1,
                    stockNo: i
                }
            }).then(res => res ? res.nextBonus : 0);
            const close = cap(Math.floor(rawData[i][time] * (1 + prevBonus + bonus)), options.capPriceMin, options.capPriceMax);
            log.debug("PARTYNATSUMI", "Stock " + i + ": raw " + rawData[i][time] + ", bonus " + (prevBonus + bonus) + " => " + close);

            const entry = addEntry(i, close, false, prevBonus + bonus);
            newLatest[i] = entry;
            db.modules.partynatsumi.TurnRecord.create({
                turn: time,
                stockNo: i,
                price: entry[4],
                nextBonus: options.bonusDecay * (prevBonus + bonus)
            })
                .catch(error => {
                    log.error("PARTYNATSUMI", "Failed to store turn record: " + error + "\n" + error.stack);
                });
        }
    });
    latest = newLatest;
    if (time < 288 && !noTimeout) {
        setNextTurnTimeout();
    }
}

function setNextTurnTimeout() {
    setTimeout(doTurn, START_TIME + time * INTERVAL - Date.now());
}

async function doTrade(userId, stonk, originalPrice, amount) {
    if (amount === 0) return ["No stonks traded.", undefined, undefined, undefined, undefined];

    return await db.transaction(async (transaction) => {
        let nowPrice, ret;
        const inv = await db.modules.partynatsumi.Inventory.findByPk(userId, {
            transaction,
            lock: transaction.LOCK.UPDATE
        });
        if (!inv) return ["Rev stop pressing old buttons pls", undefined, undefined, undefined, undefined];
        if (inv.jobTimeout) return ["You're at your part-time job right now. You can't trade.", undefined, undefined, undefined, undefined];
        if (amount < 0) { // buy
            // make sure the order was valid
            const wasValid = originalPrice !== undefined && (-amount * originalPrice <= inv.money);
            const baseValid = (-amount * latest[stonk][4] <= inv.money);
            nowPrice = Math.round(latest[stonk][4] + latest[stonk][4] * Math.random() * options.tradeRandom);
            const isValid = (-amount * nowPrice <= inv.money);

            if (!isValid) {
                // cap amount at money owned
                amount = -Math.floor(inv.money / nowPrice);

                if (amount === 0) {
                    return ["You don't have enough money to buy this.", undefined, undefined, undefined, undefined];
                } else if (wasValid) {
                    ret = "The price changed since you placed your order, so you only bought " + STONK_LIST[stonk][0] + " x" + -amount + " at " + nowPrice + " G (total: " + (-amount * nowPrice) + " G)";
                } else if (!baseValid) {
                    ret = "You did not have enough money to order that many, so you only bought " + STONK_LIST[stonk][0] + " x" + -amount + " at " + nowPrice + " G (total: " + (-amount * nowPrice) + " G)";
                } else {
                    ret = "The price fluctuated a little, so you only bought " + STONK_LIST[stonk][0] + " x" + -amount + " at " + nowPrice + " G (total: " + (-amount * nowPrice) + " G)";
                }
            } else {
                ret = "Bought " + STONK_LIST[stonk][0] + " x" + -amount + " at " + nowPrice + " G (total: " + (-amount * nowPrice) + " G)";
            }
        } else if (amount > 0) { // sell
            // cap amount at stocks owned
            nowPrice = Math.round(latest[stonk][4] - latest[stonk][4] * Math.random() * options.tradeRandom);
            if (inv.stocks[stonk] === 0) {
                return ["You don't own any of this stonk.", undefined, undefined, undefined, undefined];
            } else if (amount > inv.stocks[stonk]) {
                amount = inv.stocks[stonk];
                ret = "You didn't have that many stonks, so you sold " + STONK_LIST[stonk][0] + " x" + amount + " at " + nowPrice + " G (total: " + (amount * nowPrice) + " G)";
            } else {
                ret = "Sold " + STONK_LIST[stonk][0] + " x" + amount + " at " + nowPrice + " G (total: " + (amount * nowPrice) + " G)";
            }
        }

        inv.stocks[stonk] -= amount;
        inv.changed("stocks", true);
        inv.money += amount * nowPrice;
        await inv.save({transaction});

        db.modules.partynatsumi.TradeRecord.create({
            userId: userId,
            turn: time,
            stockNo: stonk,
            price: nowPrice,
            amount: amount
        }).catch(() => null);
        return [ret, inv.stocks[stonk], inv.money, inv.messages, inv.jobFinishMessage];
    });
}

module.exports = (db_) => {
    if (db === undefined && db_ !== undefined) {
        db = db_;
        db.transaction(transaction => db.modules.partynatsumi.Option.findOne({transaction})).then(row => {
            if (row === null) {
                options = db.modules.partynatsumi.Option.build();
                options.save()
                    .catch(error => {
                        log.error("PARTYNATSUMI", "Failed to save initial options: " + error + "\n" + error.stack);
                    });
            } else {
                options = row;
            }
        });

        db.transaction(transaction => db.modules.partynatsumi.TurnRecord.findAll({
            transaction,
            order: [["turn"], ["stockNo"]]
        })).then(records => {
            data = [[], [], [], [], [], [], [], [], []];
            latest = [];
            time = -1;
            for (const rec of records) {
                time = rec.turn;
                addEntry(rec.stockNo, rec.price, true, rec.nextBonus / .8);
            }

            if (time < 288) {
                setNextTurnTimeout();
            }
        })
    }

    return {
        STONK_LIST, INTERVAL, START_TIME, doTrade,
        getTurn: () => time,
        getData: () => data,
        getLatest: () => latest,
        startGame: setNextTurnTimeout,
        setOption: (option) => options = option
    }
}